<!doctype html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <title>roll  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet'>
  <link href='assets/style.css' rel='stylesheet'>
  <link href='assets/github.css' rel='stylesheet'>
  <link href='assets/split.css' rel='stylesheet'>
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>roll</h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            spellcheck='false'
            autocapitalize='off'
            autocorrect='off'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#coregameengine'
                  class="">
                  core/gameEngine
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#corematchuppreparer'
                  class="">
                  core/matchupPreparer
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#corerosterbuilder'
                  class="">
                  core/rosterBuilder
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#randomweightedchoice'
                  class="">
                  randomWeightedChoice
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#gameendcontext'
                  class="">
                  GameEndContext
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#coreprobabilitymodel'
                  class="">
                  core/probabilityModel
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#avg'
                  class="">
                  avg
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#utilsparsetables'
                  class="">
                  utils/parseTables
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#extractcommentblocks'
                  class="">
                  extractCommentBlocks
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#utilsstatparser'
                  class="">
                  utils/statParser
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#parsedplayer'
                  class="">
                  ParsedPlayer
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#fetchhtml'
                  class="">
                  fetchHtml
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#fetchhtml'
                  class="">
                  fetchHtml
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#roster'
                  class="">
                  Roster
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#main'
                  class="">
                  main
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#buildroster'
                  class="">
                  buildRoster
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#gamestate'
                  class="">
                  GameState
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#gamestatelike'
                  class="">
                  GameStateLike
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#extractplayerid'
                  class="">
                  extractPlayerId
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#matchup'
                  class="">
                  Matchup
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#utilsstatnormalizer'
                  class="">
                  utils/statNormalizer
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizedbatter'
                  class="">
                  NormalizedBatter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizedbatter'
                  class="">
                  NormalizedBatter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#parsetablefromcomments'
                  class="">
                  parseTableFromComments
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#fallbackidfromname'
                  class="">
                  fallbackIdFromName
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#fielder'
                  class="">
                  Fielder
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#checkgameend'
                  class="">
                  checkGameEnd
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#playerwithstats'
                  class="">
                  PlayerWithStats
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#parsetables'
                  class="">
                  parseTables
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#preparematchups'
                  class="">
                  prepareMatchups
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#parsestattable'
                  class="">
                  parseStatTable
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#describeoutcome'
                  class="">
                  describeOutcome
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#initgamestate'
                  class="">
                  initGameState
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizedpitcher'
                  class="">
                  NormalizedPitcher
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizedpitcher'
                  class="">
                  NormalizedPitcher
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#getforcedrunners'
                  class="">
                  getForcedRunners
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#loadteamfile'
                  class="">
                  loadTeamFile
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#advancerunners'
                  class="">
                  advanceRunners
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#getatbatprobabilities'
                  class="">
                  getAtBatProbabilities
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizebattingstats'
                  class="">
                  normalizeBattingStats
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#simulateatbat'
                  class="">
                  simulateAtBat
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#clamp01'
                  class="">
                  clamp01
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizepitchingstats'
                  class="">
                  normalizePitchingStats
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#normalizefieldingstats'
                  class="">
                  normalizeFieldingStats
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#updaterosterswithnewlineups'
                  class="">
                  updateRostersWithNewLineups
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#showlineupmodal'
                  class="">
                  showLineupModal
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#attemptsteal'
                  class="">
                  attemptSteal
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#attemptpickoff'
                  class="">
                  attemptPickoff
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='coregameengine'>
      core/gameEngine
    </h3>
    
    
  </div>
  

  <p>Minimal turn-by-turn baseball game simulation engine.</p>

    <div class='pre p1 fill-light mt0'>core/gameEngine</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='corematchuppreparer'>
      core/matchupPreparer
    </h3>
    
    
  </div>
  

  <p>Prepares batter-pitcher matchups with outcome probabilities.</p>

    <div class='pre p1 fill-light mt0'>core/matchupPreparer</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='corerosterbuilder'>
      core/rosterBuilder
    </h3>
    
    
  </div>
  

  <p>Builds a playable team roster from selected player IDs and full stat pools.</p>

    <div class='pre p1 fill-light mt0'>core/rosterBuilder</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='randomweightedchoice'>
      randomWeightedChoice
    </h3>
    
    
  </div>
  

  <p>Pick a random key from an object weighted by values.</p>

    <div class='pre p1 fill-light mt0'>randomWeightedChoice(weights: Record&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>weights</span> <code class='quiet'>(Record&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
	    Object with keys and their corresponding weights

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>:
        Randomly selected key based on weights

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='gameendcontext'>
      GameEndContext
    </h3>
    
    
  </div>
  

  <p>Context for game end, used for UI/display purposes only.</p>

    <div class='pre p1 fill-light mt0'>GameEndContext</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>justEndedTopHalf</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?)</code>
          : True if the top half of the inning just ended.

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>justEndedBottomHalf</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?)</code>
          : True if the bottom half of the inning just ended.

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='coreprobabilitymodel'>
      core/probabilityModel
    </h3>
    
    
  </div>
  

  <p>Computes at-bat outcome probabilities from batter and pitcher stats.</p>

    <div class='pre p1 fill-light mt0'>core/probabilityModel</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='avg'>
      avg
    </h3>
    
    
  </div>
  

  <p>Computes the average of two numbers.</p>

    <div class='pre p1 fill-light mt0'>avg(a: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, b: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>a</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    First number

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>b</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    Second number

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>:
        The average of a and b

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='utilsparsetables'>
      utils/parseTables
    </h3>
    
    
  </div>
  

  <p>Parses Baseball Reference stat tables (batting, pitching, fielding).
Uses both direct DOM and comment block parsing.</p>

    <div class='pre p1 fill-light mt0'>utils/parseTables</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='extractcommentblocks'>
      extractCommentBlocks
    </h3>
    
    
  </div>
  

  <p>Extracts all HTML comment blocks from a full HTML string.</p>

    <div class='pre p1 fill-light mt0'>extractCommentBlocks(html: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>html</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Raw HTML string

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></code>:
        Array of comment block contents

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='utilsstatparser'>
      utils/statParser
    </h3>
    
    
  </div>
  

  <p>Converts a Baseball Reference stats table into structured player objects.</p>

    <div class='pre p1 fill-light mt0'>utils/statParser</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='parsedplayer'>
      ParsedPlayer
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>ParsedPlayer</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          : Player's name

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>player_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          : Player's unique ID (from link or fallback)

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)>?)</code>
          : Additional stat fields (e.g., PA, HR, Team, etc.)

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='fetchhtml'>
      fetchHtml
    </h3>
    
    
  </div>
  

  <p>Fetches a Baseball Reference team page over HTTPS.
Designed to be used server-side (e.g. in Bun) to avoid browser CORS limitations.</p>

    <div class='pre p1 fill-light mt0'>fetchHtml</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='fetchhtml'>
      fetchHtml
    </h3>
    
    
  </div>
  

  <p>Fetch the full HTML content of a Baseball Reference team page.</p>

    <div class='pre p1 fill-light mt0'>fetchHtml(url: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>url</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    The full team URL (e.g., "
<a href="https://www.baseball-reference.com/teams/CHC/2025.shtml">https://www.baseball-reference.com/teams/CHC/2025.shtml</a>
")

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></code>:
        Promise that resolves with raw HTML content

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Throws</div>
    <ul>
      
        <li>any: Error if the fetch fails or returns a non-OK status
</li>
      
    </ul>
  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='roster'>
      Roster
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>Roster</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>lineup</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>)</code>
          : Array of batter objects

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>pitcher</span> <code class='quiet'>(<a href="#normalizedpitcher">NormalizedPitcher</a>)</code>
          : Pitcher object

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='main'>
      main
    </h3>
    
    
  </div>
  

  <p>Entry point for team page downloader.</p>

    <div class='pre p1 fill-light mt0'>main(args: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)</code>
	    CLI arguments: team code (e.g. CHC), year (e.g. 2025)

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='buildroster'>
      buildRoster
    </h3>
    
    
  </div>
  

  <p>Builds a playable team roster from selected player IDs and full stat pools.</p>

    <div class='pre p1 fill-light mt0'>buildRoster(lineupIds: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>, pitcherId: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, batters: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>, pitchers: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>>): {lineup: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>, pitcher: <a href="#normalizedpitcher">NormalizedPitcher</a>}</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>lineupIds</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)</code>
	    Array of 9 player_ids for batters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitcherId</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    player_id for starting pitcher

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>batters</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>)</code>
	    Array of normalized batters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitchers</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>>)</code>
	    Array of normalized pitchers

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>{lineup: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>, pitcher: <a href="#normalizedpitcher">NormalizedPitcher</a>}</code>:
        Roster with lineup and pitcher

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Throws</div>
    <ul>
      
        <li>any: Error if any player is missing or duplicated
</li>
      
    </ul>
  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='gamestate'>
      GameState
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>GameState</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>inning</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          : Current inning (1-based)

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>top</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
          : True if top half, false if bottom

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>outs</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          : Number of outs in current half-inning

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>bases</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
          : Array of 3 numbers, representing runners on 1B, 2B, 3B (0 or 1)

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>lineupIndices</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
          : Current batter index for each team ([away, home])

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>score</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
          : Current score ([away, home])

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>pitcherFatigue</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;{battersFaced: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>}>)</code>
          : Array tracking batters faced for each pitcher ([away, home])

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='gamestatelike'>
      GameStateLike
    </h3>
    
    
  </div>
  

  <p>Represents the minimal state needed to determine if a game should end.</p>

    <div class='pre p1 fill-light mt0'>GameStateLike</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>inning</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          : 1-based inning number (starts at 1)

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>top</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
          : True if top half of inning, false if bottom half

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>score</span> <code class='quiet'>([<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>])</code>
          : [Away, Home] score tuple

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>outs</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          : Number of outs (0 to 3)

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='extractplayerid'>
      extractPlayerId
    </h3>
    
    
  </div>
  

  <p>Extracts Baseball Reference player ID from an anchor tag.</p>

    <div class='pre p1 fill-light mt0'>extractPlayerId(link: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLAnchorElement">HTMLAnchorElement</a> | null)): (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | null)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>link</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/API/HTMLAnchorElement">HTMLAnchorElement</a> | null))</code>
	    Anchor element with player link

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | null)</code>:
        Player ID or null if not found

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='matchup'>
      Matchup
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>Matchup</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>batter_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          : Batter's player_id

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>pitcher_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          : Pitcher's player_id

          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>probabilities</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          : Map of outcome → probability

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='utilsstatnormalizer'>
      utils/statNormalizer
    </h3>
    
    
  </div>
  

  <p>Computes derived statistics and normalization for batter and pitcher stat tables.</p>

    <div class='pre p1 fill-light mt0'>utils/statNormalizer</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizedbatter'>
      NormalizedBatter
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>NormalizedBatter</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>player_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>PA</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>stats.H</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.HR</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.BB</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.SO</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.SF</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.HBP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.singles</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.doubles</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.triples</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>rates</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>rates.kRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.bbRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.hrRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.BABIP</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
            </ul>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizedbatter'>
      NormalizedBatter
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>NormalizedBatter</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>player_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>PA</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>stats.HBP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.singles</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.doubles</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.triples</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>rates</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>rates.kRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.bbRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.hrRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.BABIP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='parsetablefromcomments'>
      parseTableFromComments
    </h3>
    
    
  </div>
  

  <p>Searches comment blocks for a specific table ID and parses it to DOM.</p>

    <div class='pre p1 fill-light mt0'>parseTableFromComments(blocks: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>, tableId: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>blocks</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)</code>
	    Comment blocks

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>tableId</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    ID of table to find

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null)</code>:
        The found table element or null

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='fallbackidfromname'>
      fallbackIdFromName
    </h3>
    
    
  </div>
  

  <p>Generates a fallback ID from player name if link is missing.</p>

    <div class='pre p1 fill-light mt0'>fallbackIdFromName(name: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Player's name

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>:
        Fallback player ID

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='fielder'>
      Fielder
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>Fielder</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>position</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(Record&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
          
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='checkgameend'>
      checkGameEnd
    </h3>
    
    
  </div>
  

  <p>Evaluates whether the game should end after a half-inning concludes or due to a walk-off.
Should be called after each at-bat and after the 3rd out when the half-inning has ended.</p>

    <div class='pre p1 fill-light mt0'>checkGameEnd(gameState: <a href="#gamestatelike">GameStateLike</a>, endGameFn: function (winner: (<code>"Home"</code> | <code>"Away"</code>), score: [<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>], inning: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, lastWasTop: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>): void): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>gameState</span> <code class='quiet'>(<a href="#gamestatelike">GameStateLike</a>)</code>
	    The minimal game state to evaluate for game end.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>endGameFn</span> <code class='quiet'>(function (winner: (<code>"Home"</code> | <code>"Away"</code>), score: [<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>], inning: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, lastWasTop: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>): void)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code>:
        True if the game ended, false otherwise.

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='playerwithstats'>
      PlayerWithStats
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>PlayerWithStats</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>?)</code>
          : Optional stats object

          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='parsetables'>
      parseTables
    </h3>
    
    
  </div>
  

  <p>Parses the team page HTML and extracts major tables.</p>

    <div class='pre p1 fill-light mt0'>parseTables(html: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): {batting: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null), pitching: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null), fielding: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null)}</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>html</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Raw HTML of the team page

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>{batting: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null), pitching: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null), fielding: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null)}</code>:
        Object with batting, pitching, and fielding tables (may be null)

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='preparematchups'>
      prepareMatchups
    </h3>
    
    
  </div>
  

  <p>Given a team roster, generate batter-vs-pitcher matchups.</p>

    <div class='pre p1 fill-light mt0'>prepareMatchups(roster: <a href="#roster">Roster</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>roster</span> <code class='quiet'>(<a href="#roster">Roster</a>)</code>
	    Team roster with lineup and pitcher

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>></code>:
        Array of matchup objects (one per batter)

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='parsestattable'>
      parseStatTable
    </h3>
    
    
  </div>
  

  <p>Converts a Baseball Reference stats table to an array of player objects.
Handles cases where  contains row numbers, and name is in first .</p>

    <div class='pre p1 fill-light mt0'>parseStatTable(table: (<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null)): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#parsedplayer">ParsedPlayer</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>table</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/API/HTMLTableElement">HTMLTableElement</a> | null))</code>
	    Table element to parse

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#parsedplayer">ParsedPlayer</a>></code>:
        Parsed player stat rows

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='describeoutcome'>
      describeOutcome
    </h3>
    
    
  </div>
  

  <p>Enhance a high-level outcome with detail (fielder position).</p>

    <div class='pre p1 fill-light mt0'>describeOutcome(outcome: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>outcome</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    The basic outcome to enhance

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>:
        Detailed outcome description

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='initgamestate'>
      initGameState
    </h3>
    
    
  </div>
  

  <p>Initialize game state for two teams.</p>

    <div class='pre p1 fill-light mt0'>initGameState(): <a href="#gamestate">GameState</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#gamestate">GameState</a></code>:
        Initial game state object

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizedpitcher'>
      NormalizedPitcher
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>NormalizedPitcher</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>player_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>TBF</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>stats.HBP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>rates</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>rates.kRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.bbRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.hrRate</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>rates.BABIP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizedpitcher'>
      NormalizedPitcher
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>NormalizedPitcher</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>player_id</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>TBF</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>stats</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>stats.IP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.H</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.HR</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.BB</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.SO</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
                <li><code>stats.HBP</code> <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
                  
                  </li>
              
            </ul>
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>rates</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
          
          
            <ul>
              
                <li><code>rates.kRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.bbRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.hrRate</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
                <li><code>rates.BABIP</code> (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | null)
                  
                  </li>
              
            </ul>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='getforcedrunners'>
      getForcedRunners
    </h3>
    
    
  </div>
  

  <p>Returns an array of base indices (0=1B, 1=2B, 2=3B) for runners who are forced to advance.</p>

    <div class='pre p1 fill-light mt0'>getForcedRunners(bases: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>bases</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
	    Array of 3 numbers, representing runners on 1B, 2B, 3B (0 or 1)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>></code>:
        Indices of forced runners

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='loadteamfile'>
      loadTeamFile
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>loadTeamFile(filename: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;LoadedTeam></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>filename</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Team file to load

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;LoadedTeam></code>
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='advancerunners'>
      advanceRunners
    </h3>
    
    
  </div>
  

  <p>Advance runners and return number of runs scored.
Mutates gameState.bases.</p>

    <div class='pre p1 fill-light mt0'>advanceRunners(bases: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>, outcome: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): [<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>]</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>bases</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>)</code>
	    Array of 3 numbers, representing runners on 1B, 2B, 3B (0 or 1)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>outcome</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Outcome of the at-bat ('1B', '2B', '3B', 'HR', etc.)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>[<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>]</code>:
        Tuple: [newBases, runsScored]

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='getatbatprobabilities'>
      getAtBatProbabilities
    </h3>
    
    
  </div>
  

  <p>Given a normalized batter and pitcher, compute the at-bat outcome probabilities.</p>

    <div class='pre p1 fill-light mt0'>getAtBatProbabilities(batter: <a href="#normalizedbatter">NormalizedBatter</a>, pitcher: <a href="#normalizedpitcher">NormalizedPitcher</a>): AtBatProbabilities</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>batter</span> <code class='quiet'>(<a href="#normalizedbatter">NormalizedBatter</a>)</code>
	    A normalized batter object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitcher</span> <code class='quiet'>(<a href="#normalizedpitcher">NormalizedPitcher</a>)</code>
	    A normalized pitcher object

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>AtBatProbabilities</code>:
        Map of outcome → probability. Keys: 'K', 'BB', 'HBP', 'HR', '1B', '2B', '3B', 'Out'

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizebattingstats'>
      normalizeBattingStats
    </h3>
    
    
  </div>
  

  <p>Extracts and normalizes batting outcomes into rate-based stats for simulation use.</p>

    <div class='pre p1 fill-light mt0'>normalizeBattingStats(batters: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawBatter>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>batters</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawBatter>)</code>
	    Array of raw batter stat objects

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>></code>:
        Normalized batters with outcome probabilities and breakdowns

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='simulateatbat'>
      simulateAtBat
    </h3>
    
    
  </div>
  

  <p>Simulates a single at-bat and updates the game state.</p>

    <div class='pre p1 fill-light mt0'>simulateAtBat(awayMatchups: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>>, homeMatchups: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>>, state: <a href="#gamestate">GameState</a>, awayFielders: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#fielder">Fielder</a>>, homeFielders: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#fielder">Fielder</a>>, randomFn: function (weights: Record&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?, describeFn: function (outcome: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?): AtBatResult</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>awayMatchups</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>>)</code>
	    Array of matchup objects for the away team

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>homeMatchups</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#matchup">Matchup</a>>)</code>
	    Array of matchup objects for the home team

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>state</span> <code class='quiet'>(<a href="#gamestate">GameState</a>)</code>
	    The current game state (mutated in place)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>awayFielders</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#fielder">Fielder</a>>)</code>
	    Array of normalized fielders for the away team

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>homeFielders</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#fielder">Fielder</a>>)</code>
	    Array of normalized fielders for the home team

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>randomFn</span> <code class='quiet'>(function (weights: Record&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
	    Optional: function to pick outcome, defaults to randomWeightedChoice

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>describeFn</span> <code class='quiet'>(function (outcome: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
	    Optional: function to describe outcome, defaults to describeOutcome

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>AtBatResult</code>:
        Object with batter_id, outcome description, and (if applicable) fielder info

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='clamp01'>
      clamp01
    </h3>
    
    
  </div>
  

  <p>Clamp a value to the range [0, 1]. Logs a warning if clamping occurs.</p>

    <div class='pre p1 fill-light mt0'>clamp01(x: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, label: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>x</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    Value to clamp

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>label</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
	    Optional label for logging

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>:
        Clamped value

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizepitchingstats'>
      normalizePitchingStats
    </h3>
    
    
  </div>
  

  <p>Extracts and normalizes pitcher stats for simulation use.</p>

    <div class='pre p1 fill-light mt0'>normalizePitchingStats(pitchers: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawPitcher>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitchers</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawPitcher>)</code>
	    Array of raw pitcher stat objects

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>></code>:
        Normalized pitchers with outcome rates

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='normalizefieldingstats'>
      normalizeFieldingStats
    </h3>
    
    
  </div>
  

  <p>Extracts and normalizes fielding stats for simulation use.</p>

    <div class='pre p1 fill-light mt0'>normalizeFieldingStats(fielders: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawFielder>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fielders</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;RawFielder>)</code>
	    Array of raw fielder stat objects

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any></code>:
        Normalized fielders with defensive stats

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='updaterosterswithnewlineups'>
      updateRostersWithNewLineups
    </h3>
    
    
  </div>
  

  <p>Update rosters with new lineups without resetting game state</p>

    <div class='pre p1 fill-light mt0'>updateRostersWithNewLineups(): void</div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>void</code>
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='showlineupmodal'>
      showLineupModal
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>showLineupModal(team: (<code>"home"</code> | <code>"away"</code>), batters: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>, pitchers: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>>, currentLineup: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>> | null), currentPitcher: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | null)): void</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>team</span> <code class='quiet'>((<code>"home"</code> | <code>"away"</code>))</code>
	    Team to customize

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>batters</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedbatter">NormalizedBatter</a>>)</code>
	    Available batters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitchers</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#normalizedpitcher">NormalizedPitcher</a>>)</code>
	    Available pitchers

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>currentLineup</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>> | null))</code>
	    Current lineup

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>currentPitcher</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | null))</code>
	    Current pitcher

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>void</code>
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='attemptsteal'>
      attemptSteal
    </h3>
    
    
  </div>
  

  <p>Attempt to steal a base.</p>

    <div class='pre p1 fill-light mt0'>attemptSteal(base: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, state: <a href="#gamestate">GameState</a>, runner: <a href="#playerwithstats">PlayerWithStats</a>, pitcher: <a href="#playerwithstats">PlayerWithStats</a>, catcher: <a href="#playerwithstats">PlayerWithStats</a>, fromBase: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, randomFn: function (max: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?): StealResult</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>base</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    The base to steal (2 for 2B, 3 for 3B, 4 for home)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>state</span> <code class='quiet'>(<a href="#gamestate">GameState</a>)</code>
	    The current game state (mutated in place)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>runner</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The runner object (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitcher</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The pitcher object (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>catcher</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The catcher object (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fromBase</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    The base the runner is currently on (1 for 1B, 2 for 2B, 3 for 3B)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>randomFn</span> <code class='quiet'>(function (max: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?)</code>
	    Optional random function, should be called as rand(1) to get [0,1)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>StealResult</code>:
        Object with success status, out status, and description

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='attemptpickoff'>
      attemptPickoff
    </h3>
    
    
  </div>
  

  <p>Attempt a pickoff at a base.</p>

    <div class='pre p1 fill-light mt0'>attemptPickoff(base: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, state: <a href="#gamestate">GameState</a>, runner: <a href="#playerwithstats">PlayerWithStats</a>, pitcher: <a href="#playerwithstats">PlayerWithStats</a>, fielder: <a href="#playerwithstats">PlayerWithStats</a>, randomFn: function (max: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?): PickoffResult</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>base</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    The base to pick off (1, 2, or 3)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>state</span> <code class='quiet'>(<a href="#gamestate">GameState</a>)</code>
	    The current game state (mutated in place)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>runner</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The runner object (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pitcher</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The pitcher object (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fielder</span> <code class='quiet'>(<a href="#playerwithstats">PlayerWithStats</a>)</code>
	    The fielder covering the base (should have .stats if available)

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>randomFn</span> <code class='quiet'>(function (max: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?)</code>
	    Optional random function, should be called as rand(1) to get [0,1)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>PickoffResult</code>:
        Object with success status, out status, error status, and description

      
    
  

  

  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
