function u0(q){let Q=/<!--([\s\S]*?)-->/g,J=[],X;while((X=Q.exec(q))!==null)J.push(X[1]);return J}function b0(q,Q){let J=new DOMParser;for(let X of q)if(X.includes(`id="${Q}"`))return J.parseFromString(X,"text/html").querySelector(`table#${Q}`)||null;return null}function O0(q){let Q=document.createElement("div");Q.style.display="none",document.body.appendChild(Q),Q.innerHTML=q;let J=Q.querySelector("table#players_standard_batting"),X=Q.querySelector("table#players_standard_pitching"),Y=u0(q),$=b0(Y,"players_standard_fielding");return Q.remove(),{batting:J,pitching:X,fielding:$}}function C0(q){if(!q||!q.href)return null;let Q=q.href.match(/\/players\/.\/([^/.]+)\.shtml/);return Q?Q[1]:null}function p0(q){return q.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,12)}function z0(q){if(!q)return[];let Q=Array.from(q.querySelectorAll("tbody > tr")).filter((Y)=>!Y.classList.contains("thead")),J=Array.from(q.querySelectorAll("thead tr th")).map((Y)=>(Y.textContent??"").trim()),X=[];for(let Y of Q){let $=[Y.querySelector("th"),...Y.querySelectorAll("td")];if($.length!==J.length)continue;let Z={};for(let U=0;U<J.length;U++){let z=J[U],j=$[U];if(U===0){let W=j?.textContent?.trim()||"",E=j?.querySelector?.("a")||null,F=C0(E);if(/^\d+$/.test(W)){let v=Y.querySelector("td");W=v?.textContent?.trim()||"(unknown)",E=v?.querySelector?.("a")||null,F=C0(E)||F}Z.name=W,Z.player_id=F||p0(W)}else{let W=j?.textContent?.trim()||"",E=Number(W.replace(/,/g,""));Z[z]=isNaN(E)?W:E}}X.push(Z)}return X}function T0(q){return q.map((Q)=>{let J=Number(Q.PA)||0,X=Number(Q.AB)||0,Y=Number(Q.H)||0,$=Number(Q.HR)||0,Z=Number(Q.BB)||0,U=Number(Q.SO)||0,z=Number(Q.SF)||0,j=Number(Q.HBP)||0,W=Number(Q["2B"])||0,E=Number(Q["3B"])||0,F=Y-W-E-$,v=X-U-$+z,L=v>0?(Y-$)/v:null,G=J>0?U/J:null,M=J>0?Z/J:null,A=J>0?$/J:null;return{name:Q.name,player_id:Q.player_id,PA:J,stats:{H:Y,HR:$,BB:Z,SO:U,SF:z,HBP:j,singles:F,doubles:W,triples:E},rates:{kRate:G,bbRate:M,hrRate:A,BABIP:L}}})}function M0(q){return q.map((Q)=>{let J=Number(Q.IP)||0,X=Number(Q.TBF)||0,Y=Number(Q.H)||0,$=Number(Q.HR)||0,Z=Number(Q.BB)||0,U=Number(Q.SO)||0,z=Number(Q.HBP)||0,j=X>0?U/X:null,W=X>0?Z/X:null,E=X>0?$/X:null,F=X-U-$-Z-z,v=F>0?(Y-$)/F:null;return{name:Q.name,player_id:Q.player_id,TBF:X,stats:{IP:J,H:Y,HR:$,BB:Z,SO:U,HBP:z},rates:{kRate:j,bbRate:W,hrRate:E,BABIP:v}}})}function a(q,Q,J,X){let Y=q.map((U)=>{let z=J.find((j)=>j.player_id===U);if(!z)throw new Error(`Lineup player not found: ${U}`);return z}),$=X.find((U)=>U.player_id===Q);if(!$)throw new Error(`Starting pitcher not found: ${Q}`);let Z=new Set;for(let U of Y){if(Z.has(U.player_id))throw new Error(`Duplicate player in lineup: ${U.player_id}`);Z.add(U.player_id)}if(Z.has(Q))throw new Error(`Pitcher also appears in lineup: ${Q}`);return{lineup:Y,pitcher:$}}function X0(q,Q){return(q+Q)/2}function F0(q,Q){let J=q.rates||{},X=Q.rates||{},Y=q.stats||{},$=O(J.kRate??0,"batter.kRate"),Z=O(X.kRate??0,"pitcher.kRate"),U=O(J.bbRate??0,"batter.bbRate"),z=O(X.bbRate??0,"pitcher.bbRate"),j=O(J.hrRate??0,"batter.hrRate"),W=O(X.hrRate??0,"pitcher.hrRate"),E=O(J.BABIP??0.29,"batter.BABIP"),F=O(X.BABIP??0.29,"pitcher.BABIP"),v=Math.max(0,q.PA||0),L=Math.max(0,Y.HBP??0),G=Math.max(0,Y.singles??0),M=Math.max(0,Y.doubles??0),A=Math.max(0,Y.triples??0),C=O(X0($,Z),"K"),x=O(X0(U,z),"BB"),b=O(X0(j,W),"HR"),_0=O(X0(E,F),"BABIP"),Q0=O(v>0?L/v:0,"HBP"),D=C+x+Q0+b,N=Math.max(0,1-D),T=_0*N,k=N-T,P=G+M+A,j0=P>0?G/P:0.7,h0=P>0?M/P:0.2,d0=P>0?A/P:0.1;return{K:O(C,"K"),BB:O(x,"BB"),HBP:O(Q0,"HBP"),HR:O(b,"HR"),"1B":O(T*j0,"1B"),"2B":O(T*h0,"2B"),"3B":O(T*d0,"3B"),Out:O(k,"Out")}}function O(q,Q){if(typeof q!=="number"||isNaN(q))return 0;if(q<0){if(Q)console.warn(`[probabilityModel] Clamped negative value for ${Q}: ${q} → 0`);return 0}if(q>1){if(Q)console.warn(`[probabilityModel] Clamped value >1 for ${Q}: ${q} → 1`);return 1}return q}function t(q){let{lineup:Q,pitcher:J}=q;return Q.map((X)=>{let Y=F0(X,J);return{batter_id:X.player_id,pitcher_id:J.player_id,probabilities:Y}})}function e(q){let Q=Object.values(q).reduce((X,Y)=>X+Y,0),J=Math.random()*Q;for(let[X,Y]of Object.entries(q))if((J-=Y)<=0)return X;return Object.keys(q).pop()||""}var c0={Groundout:0.45,Flyout:0.3,Lineout:0.15,Popout:0.1},m0={Groundout:{"1B":0.2,"2B":0.2,SS:0.25,"3B":0.2,P:0.15},Flyout:{LF:0.35,CF:0.45,RF:0.2},Lineout:{"1B":0.25,"2B":0.25,SS:0.25,"3B":0.25},Popout:{C:0.3,"1B":0.2,"2B":0.15,SS:0.2,"3B":0.15}};function v0(q){if(q==="Out"){let Q=e(c0),J=e(m0[Q]);return`${Q} to ${J}`}return q}function L0(){return{inning:1,top:!0,outs:0,bases:[0,0,0],lineupIndices:[0,0],score:[0,0],pitcherFatigue:[{battersFaced:0},{battersFaced:0}]}}function N0(q){let Q=[];if(q[0])Q.push(0);if(q[1]&&q[0])Q.push(1);if(q[2]&&q[1]&&q[0])Q.push(2);return Q}function W0(q,Q){let J=0,X=[0,0,0];for(let $=2;$>=0;$--){if(!q[$])continue;let Z=$+(Q==="1B"?1:Q==="2B"?2:Q==="3B"?3:4);if(Z>=3)J++;else X[Z]=1}let Y={"1B":0,"2B":1,"3B":2}[Q];if(Y!==void 0)X[Y]=1;if(Q==="HR")J++;return[X,J]}function k0(q,Q,J,X,Y,$,Z){let U=$||e,z=Z||v0,j=J.top?0:1,W=j===0?q:Q,E=j===0?Y:X,F=Array.isArray(E)?E:[],v=J.lineupIndices[j],L=W[v%W.length],G=L.probabilities;if(J.pitcherFatigue&&J.pitcherFatigue[1-j]){J.pitcherFatigue[1-j].battersFaced++;let D=J.pitcherFatigue[1-j].battersFaced;if(D>18){let N=Math.min((D-18)*0.02,0.2);if(G={...G},G.BB)G.BB+=N;if(G.HBP)G.HBP+=N/2;if(G["1B"])G["1B"]+=N;if(G["2B"])G["2B"]+=N/2;if(G["3B"])G["3B"]+=N/4;if(G.HR)G.HR+=N/4;if(G.K)G.K-=N;if(G.Out)G.Out-=N;let T=Object.values(G).reduce((k,P)=>k+P,0);Object.keys(G).forEach((k)=>G[k]=Math.max(0,G[k]/T))}}let M=U(G),A=z(M);J.lineupIndices[j]++;let C=void 0,x="",b=!1,_0=!1,Q0=!1;if(M==="Out"){let D=A.match(/to ([A-Z0-9]+)/);if(D){if(x=D[1],C=F.find((N)=>N.position===x),C&&C.stats){let N=Number(C.stats.E)||0,T=Number(C.stats.PO)||0,k=Number(C.stats.A)||0,P=T+k+N,j0=P>0?N/P:0.01;if(Math.random()<j0)b=!0}else if(Math.random()<0.01)b=!0}}if(b){let[D,N]=W0(J.bases,"1B");return J.bases=D,J.score[j]+=N,{batter_id:L.batter_id,outcome:`Error on ${x}`,fielder:C,fielderPosition:x}}if(M==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)&&J.outs===0){let D=N0(J.bases);if(D.length>=2){if(Math.random()<0.01){Q0=!0;let N=D.slice().sort((T,k)=>k-T);for(let T=0;T<2&&T<N.length;T++)J.bases[N[T]]=0;return J.outs=3,{batter_id:L.batter_id,outcome:"Grounded into triple play",...C?{fielder:C,fielderPosition:x}:{}}}}}if(M==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)&&J.outs<2){let D=N0(J.bases);if(D.length>=1){if(Math.random()<0.25){_0=!0;let N=Math.max(...D);return J.bases[N]=0,J.outs=Math.min(J.outs+2,3),{batter_id:L.batter_id,outcome:"Grounded into double play",...C?{fielder:C,fielderPosition:x}:{}}}}}if(M==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)){J.outs++;let D=N0(J.bases);for(let N of D.slice().sort((T,k)=>k-T))if(J.bases[N])if(N===2)J.bases[N]=0,J.score[j]+=1;else J.bases[N+1]=1,J.bases[N]=0,console.log("Advancing forced runner from",N,"to",N+1,"Bases:",J.bases);return{batter_id:L.batter_id,outcome:A,...C?{fielder:C,fielderPosition:x}:{}}}if(M==="Out"||M==="K")J.outs++;else if(M==="BB"||M==="HBP"){let[D,N]=W0(J.bases,"1B");J.bases=D,J.score[j]+=N}else{let[D,N]=W0(J.bases,M);J.bases=D,J.score[j]+=N}return{batter_id:L.batter_id,outcome:A,...C?{fielder:C,fielderPosition:x}:{}}}function Y0(q,Q,J,X,Y,$,Z){let U=Z||Math.random;if(!Q.bases[$-1])return{success:!1,out:!1,description:`No runner on base ${$} to steal from.`};let z=q===2?0.6:q===3?0.3:0.1;if(J?.stats&&Y?.stats){let W=Number(J.stats.SPD||J.stats.SB||50),E=Number(Y.stats.ARM||Y.stats["CS%"]||50);if(z=0.5+(W-E)/200,q===3)z-=0.2;if(q===4)z-=0.4;z=Math.max(0.05,Math.min(0.95,z))}if(U(1)<z){if(Q.bases[$-1]=0,q<=3)Q.bases[q-1]=1;else Q.score[Q.top?0:1]+=1;return{success:!0,out:!1,description:`Runner successfully stole base ${q===4?"Home":q}`}}else return Q.bases[$-1]=0,Q.outs++,{success:!1,out:!0,description:`Runner caught stealing base ${q===4?"Home":q}`}}function $0(q,Q,J,X,Y,$){let Z=$||Math.random;if(!Q.bases[q-1])return{success:!1,out:!1,error:!1,description:`No runner on base ${q} to pick off.`};let U=0.05,z=0.1;if(X?.stats&&J?.stats){let W=Number(X.stats.PK||50),E=Number(J.stats.SPD||50);U=0.03+(W-E)/1000,U=Math.max(0.01,Math.min(0.15,U))}if(Y?.stats)z=0.05+Number(Y.stats.E||0)/1000,z=Math.max(0.01,Math.min(0.2,z));let j=Z(1);if(j<U)return Q.bases[q-1]=0,Q.outs++,{success:!0,out:!0,error:!1,description:`Runner picked off at base ${q}`};else if(j<U+z){if(Q.bases[q-1]=0,q<3)Q.bases[q]=1;else Q.score[Q.top?0:1]+=1;return{success:!1,out:!1,error:!0,description:`Pickoff error: runner advances from base ${q}`}}else return{success:!1,out:!1,error:!1,description:`Pickoff attempt at base ${q} unsuccessful`}}var g=document.getElementById("home-team-select"),y=document.getElementById("away-team-select"),H0=document.getElementById("load-teams-btn"),B=document.getElementById("status"),G0=document.getElementById("lineups-container"),U0=document.getElementById("game-state-container"),S=document.getElementById("next-atbat-btn"),R=document.getElementById("atbat-result-container"),I0=document.getElementById("customize-home-lineup-btn"),A0=document.getElementById("customize-away-lineup-btn"),s=document.getElementById("custom-lineup-modal"),x0=document.getElementById("close-lineup-modal"),P0=document.getElementById("lineup-modal-title"),w0=document.getElementById("custom-lineup-form"),q0=document.getElementById("batting-order-list"),J0=document.getElementById("pitcher-select"),w=document.getElementById("lineup-error"),p=document.getElementById("steal-2b-btn"),c=document.getElementById("steal-3b-btn"),m=document.getElementById("steal-home-btn"),l=document.getElementById("pickoff-1b-btn"),n=document.getElementById("pickoff-2b-btn"),i=document.getElementById("pickoff-3b-btn"),H=null,I=null,K=null,_=null,o=null,r=null,V=null,l0=1,n0=!0,f=null,V0=null,h=null,Z0=null,g0=null,K0=[];async function i0(){return["ARI-2025.html","ATL-2025.html","BAL-2025.html","BOS-2025.html","CHC-2025.html","CHW-2025.html","CIN-2025.html","CLE-2025.html","COL-2025.html","DET-2025.html","HOU-2025.html","KCR-2025.html","LAA-2025.html","LAD-2025.html","MIA-2025.html","MIL-2025.html","MIN-2025.html","NYM-2025.html","NYY-2025.html","OAK-2025.html","PHI-2025.html","PIT-2025.html","SDP-2025.html","SEA-2025.html","SFG-2025.html","STL-2025.html","TBR-2025.html","TEX-2025.html","TOR-2025.html","WSN-2025.html"]}async function S0(q){let J=await(await fetch(`./data/${q}`)).text(),{batting:X,pitching:Y}=O0(J),$=X?z0(X):[],Z=Y?z0(Y):[],U=T0($),z=M0(Z);return{batters:U,pitchers:z}}function y0(q,Q){if(!G0)return;G0.innerHTML="";let J=(X,Y)=>{if(!X)return`<div><strong>${Y}:</strong> Not loaded</div>`;let $=X.lineup||X.batters||[],Z=X.pitcher||X.pitchers&&X.pitchers[0]||{name:"N/A"};return`
      <div style="margin-bottom:1.5em;">
        <strong>${Y} Lineup</strong>
        <table class="lineup-table">
          <thead><tr><th>#</th><th>Name</th><th>PA</th></tr></thead>
          <tbody>
            ${($||[]).slice(0,9).map((U,z)=>`<tr><td>${z+1}</td><td>${U.name||""}</td><td>${U.PA||""}</td></tr>`).join("")}
          </tbody>
        </table>
        <div><strong>Pitcher:</strong> ${Z.name}</div>
      </div>
    `};G0.innerHTML=`
    <div style="display:flex;gap:2em;flex-wrap:wrap;">
      <div style="flex:1;min-width:250px;">${J(q,"Home")}</div>
      <div style="flex:1;min-width:250px;">${J(Q,"Away")}</div>
    </div>
  `}function B0(){if(!U0)return;if(!V||!K||!_){if(U0.innerHTML="<em>Game not started.</em>",S)S.style.display="none";return}let q=V,{inning:Q,top:J,outs:X,bases:Y,score:$,lineupIndices:Z}=q,U=J?0:1,z=U===0?r:o,j=U===0?_:K;if(!j){if(U0.innerHTML="<em>Roster not loaded.</em>",S)S.style.display="none";return}let W=Z[U]%j.lineup.length,E=j.lineup[W],F=(U===0?K:_).pitcher,v=["1B","2B","3B"].map((L,G)=>q.bases[G]?L:"").filter(Boolean).join(", ")||"Empty";if(U0.innerHTML=`
    <div><strong>Inning:</strong> ${Q} (${J?"Top":"Bottom"})</div>
    <div><strong>Outs:</strong> ${X}</div>
    <div><strong>Bases:</strong> ${v}</div>
    <div><strong>Score:</strong> Away ${$[0]} &ndash; Home ${$[1]}</div>
    <div style="margin-top:1em;"><strong>At Bat:</strong> ${E.name} (vs ${F.name})</div>
  `,S)S.style.display=""}function u(q,Q=!1){if(!R)return;if(!q)return;K0.push(q),E0()}function E0(){if(!R)return;R.innerHTML="";let q=null,Q=null;for(let J of K0){if(J.inning!==q||J.top!==Q){let $=document.createElement("div");$.style.marginTop="1em",$.style.fontWeight="bold",$.textContent=`Inning ${J.inning} - ${J.top?"Top":"Bottom"}`,R.appendChild($),q=J.inning,Q=J.top}let X=["1B","2B","3B"].map(($,Z)=>J.bases[Z]?$:"").filter(Boolean).join(", ")||"Empty",Y=document.createElement("div");Y.innerHTML=`<strong>${J.batterName}:</strong> ${J.outcome} <span style="color:#888">(Outs: ${J.outs}, Score: Away ${J.score[0]} – Home ${J.score[1]}, Bases: ${X})</span>`,R.appendChild(Y)}}function o0(){if(!K||!_)return;o=t(K),r=t(_),V=L0(),K0=[],E0(),d()}function r0(){if(!V||!o||!r)return;let q=V,Q=q.top?0:1,J=Q===0?r:o,X=Q===0?_:K;if(!X)return;let Y=q.lineupIndices[Q]%X.lineup.length,$=X.lineup[Y],Z=k0(r,o,q,[],[]);u({batterName:$.name,outcome:Z.outcome,outs:q.outs,score:[...q.score],bases:[...q.bases],inning:q.inning,top:q.top});let U="",z=!1;if(q.outs>=3)if(q.outs=0,q.bases=[0,0,0],q.top)q.top=!1,U="End of top half. Switching to bottom of inning.",z=!0;else q.top=!0,q.inning++,U="End of inning. Advancing to next inning.",z=!0;if(z){if(R){let j=document.createElement("div");j.innerHTML=`<em>${U}</em>`,R.appendChild(j),l0=q.inning,n0=q.top;let W=document.createElement("div");W.style.marginTop="1em",W.style.fontWeight="bold",W.textContent=`Inning ${q.inning} - ${q.top?"Top":"Bottom"}`,R.appendChild(W)}}d()}async function D0(){if(!g||!y||!B)return;let q=g.value,Q=y.value;if(!q||!Q)return;B.textContent="Loading lineups...";try{let[J,X]=await Promise.all([S0(q),S0(Q)]);H=J,I=X,K=J&&J.batters&&J.pitchers?a(f&&f.length===9?f:J.batters.slice(0,9).map((Y)=>Y.player_id),V0||J.pitchers[0].player_id,J.batters,J.pitchers):null,_=X&&X.batters&&X.pitchers?a(h&&h.length===9?h:X.batters.slice(0,9).map((Y)=>Y.player_id),Z0||X.pitchers[0].player_id,X.batters,X.pitchers):null,y0(K,_),K0=[],E0(),B.textContent="Lineups loaded. Ready to simulate!",o0()}catch(J){B.textContent="Failed to load lineups."}}async function R0(){if(!B)return;B.textContent="Loading teams...";let q=await i0();if(!q.length){B.textContent="No teams found in data folder.";return}for(let Q of[g,y]){if(!Q)continue;Q.innerHTML="";for(let J of q){let X=document.createElement("option");X.value=J,X.textContent=J.replace(".html",""),Q.appendChild(X)}}if(g)g.value="CHC-2025.html";if(y)y.value="MIL-2025.html";if(B.textContent="Select home and away teams.",g&&y)D0()}if(H0)H0.addEventListener("click",R0);if(g)g.addEventListener("change",D0);if(y)y.addEventListener("change",D0);if(S)S.addEventListener("click",r0);if(I0)I0.addEventListener("click",()=>{if(!H)return;f0("home",H.batters,H.pitchers,f,V0)});if(A0)A0.addEventListener("click",()=>{if(!I)return;f0("away",I.batters,I.pitchers,h,Z0)});if(x0)x0.addEventListener("click",()=>{if(s)s.style.display="none"});if(w0)w0.addEventListener("submit",(q)=>{if(q.preventDefault(),!q0||!J0)return;let Q=[],J=q0.querySelectorAll("select");for(let Y of J){if(!Y.value){if(w)w.textContent="Please select a player for every lineup slot.";return}Q.push(Y.value)}if(new Set(Q).size!==Q.length){if(w)w.textContent="No duplicate players allowed in the lineup.";return}let X=J0.value;if(!X){if(w)w.textContent="Please select a starting pitcher.";return}if(Q.includes(X)){if(w)w.textContent="Pitcher cannot also be in the batting lineup.";return}if(g0==="home")f=Q,V0=X;else h=Q,Z0=X;if(s)s.style.display="none";a0()});window.addEventListener("DOMContentLoaded",()=>{R0()});function f0(q,Q,J,X,Y){if(g0=q,!s||!P0||!q0||!J0)return;if(P0.textContent=`Customize ${q==="home"?"Home":"Away"} Lineup`,w)w.textContent="";s.style.display="flex";let $=X,Z=Y;if(q==="home"&&K)$=K.lineup?K.lineup.map((U)=>U.player_id):X,Z=K.pitcher?K.pitcher.player_id:Y;else if(q==="away"&&_)$=_.lineup?_.lineup.map((U)=>U.player_id):X,Z=_.pitcher?_.pitcher.player_id:Y;q0.innerHTML="";for(let U=0;U<9;U++){let z=document.createElement("li"),j=document.createElement("select");if(j.name=`batter${U}`,j.required=!0,j.innerHTML='<option value="">-- Select --</option>'+Q.map((W)=>`<option value="${W.player_id}">${W.name} (${W.PA} PA)</option>`).join(""),$&&$[U])j.value=$[U];z.appendChild(j),q0.appendChild(z)}if(J0.innerHTML='<option value="">-- Select --</option>'+J.map((U)=>`<option value="${U.player_id}">${U.name} (${U.stats&&U.stats.IP?U.stats.IP:""} IP)</option>`).join(""),Z)J0.value=Z}function s0(){if(!V)return;if(p)(p instanceof HTMLButtonElement?p:p).disabled=!V.bases[0];if(c)(c instanceof HTMLButtonElement?c:c).disabled=!V.bases[1];if(m)(m instanceof HTMLButtonElement?m:m).disabled=!V.bases[2];if(l)(l instanceof HTMLButtonElement?l:l).disabled=!V.bases[0];if(n)(n instanceof HTMLButtonElement?n:n).disabled=!V.bases[1];if(i)(i instanceof HTMLButtonElement?i:i).disabled=!V.bases[2]}function d(){B0(),s0()}if(p)p.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=Y0(2,V,J,X,Y,1);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});if(c)c.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=Y0(3,V,J,X,Y,2);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});if(m)m.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=Y0(4,V,J,X,Y,3);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});if(l)l.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=$0(1,V,J,X,Y);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});if(n)n.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=$0(2,V,J,X,Y);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});if(i)i.addEventListener("click",()=>{if(!V||!K||!_)return;let q=V.top?0:1,J=(q===0?_:K).lineup.find((Z)=>!0)||{},X=(q===0?K:_).pitcher,Y=(q===0?K:_).lineup[0]||{},$=$0(3,V,J,X,Y);u({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),d()});function a0(){if(!H||!I)return;if(K=H&&H.batters&&H.pitchers?a(f&&f.length===9?f:H.batters.slice(0,9).map((q)=>q.player_id),V0||H.pitchers[0].player_id,H.batters,H.pitchers):null,_=I&&I.batters&&I.pitchers?a(h&&h.length===9?h:I.batters.slice(0,9).map((q)=>q.player_id),Z0||I.pitchers[0].player_id,I.batters,I.pitchers):null,K&&_)o=t({lineup:K.lineup,pitcher:_.pitcher}),r=t({lineup:_.lineup,pitcher:K.pitcher});y0(K,_),B0()}
