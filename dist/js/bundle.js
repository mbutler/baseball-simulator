function d0(q){let J=/<!--([\s\S]*?)-->/g,Q=[],U;while((U=J.exec(q))!==null)Q.push(U[1]);return Q}function u0(q,J){let Q=new DOMParser;for(let U of q)if(U.includes(`id="${J}"`))return Q.parseFromString(U,"text/html").querySelector(`table#${J}`)||null;return null}function E0(q){let J=document.createElement("div");J.style.display="none",document.body.appendChild(J),J.innerHTML=q;let Q=J.querySelector("table#players_standard_batting"),U=J.querySelector("table#players_standard_pitching"),X=d0(q),$=u0(X,"players_standard_fielding");return J.remove(),{batting:Q,pitching:U,fielding:$}}function D0(q){if(!q||!q.href)return null;let J=q.href.match(/\/players\/.\/([^/.]+)\.shtml/);return J?J[1]:null}function p0(q){return q.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,12)}function Z0(q){if(!q)return[];let J=Array.from(q.querySelectorAll("tbody > tr")).filter((X)=>!X.classList.contains("thead")),Q=Array.from(q.querySelectorAll("thead tr th")).map((X)=>(X.textContent??"").trim()),U=[];for(let X of J){let $=[X.querySelector("th"),...X.querySelectorAll("td")];if($.length!==Q.length)continue;let Z={};for(let Y=0;Y<Q.length;Y++){let _=Q[Y],K=$[Y];if(Y===0){let W=K?.textContent?.trim()||"",E=K?.querySelector?.("a")||null,L=D0(E);if(/^\d+$/.test(W)){let F=X.querySelector("td");W=F?.textContent?.trim()||"(unknown)",E=F?.querySelector?.("a")||null,L=D0(E)||L}Z.name=W,Z.player_id=L||p0(W)}else{let W=K?.textContent?.trim()||"",E=Number(W.replace(/,/g,""));Z[_]=isNaN(E)?W:E}}U.push(Z)}return U}function O0(q){return q.map((J)=>{let Q=Number(J.PA)||0,U=Number(J.AB)||0,X=Number(J.H)||0,$=Number(J.HR)||0,Z=Number(J.BB)||0,Y=Number(J.SO)||0,_=Number(J.SF)||0,K=Number(J.HBP)||0,W=Number(J["2B"])||0,E=Number(J["3B"])||0,L=X-W-E-$,F=U-Y-$+_,v=F>0?(X-$)/F:null,G=Q>0?Y/Q:null,T=Q>0?Z/Q:null,A=Q>0?$/Q:null;return{name:J.name,player_id:J.player_id,PA:Q,stats:{H:X,HR:$,BB:Z,SO:Y,SF:_,HBP:K,singles:L,doubles:W,triples:E},rates:{kRate:G,bbRate:T,hrRate:A,BABIP:v}}})}function C0(q){return q.map((J)=>{let Q=Number(J.IP)||0,U=Number(J.TBF)||0,X=Number(J.H)||0,$=Number(J.HR)||0,Z=Number(J.BB)||0,Y=Number(J.SO)||0,_=Number(J.HBP)||0,K=U>0?Y/U:null,W=U>0?Z/U:null,E=U>0?$/U:null,L=U-Y-$-Z-_,F=L>0?(X-$)/L:null;return{name:J.name,player_id:J.player_id,TBF:U,stats:{IP:Q,H:X,HR:$,BB:Z,SO:Y,HBP:_},rates:{kRate:K,bbRate:W,hrRate:E,BABIP:F}}})}function K0(q,J,Q,U){let X=q.map((Y)=>{let _=Q.find((K)=>K.player_id===Y);if(!_)throw new Error(`Lineup player not found: ${Y}`);return _}),$=U.find((Y)=>Y.player_id===J);if(!$)throw new Error(`Starting pitcher not found: ${J}`);let Z=new Set;for(let Y of X){if(Z.has(Y.player_id))throw new Error(`Duplicate player in lineup: ${Y.player_id}`);Z.add(Y.player_id)}if(Z.has(J))throw new Error(`Pitcher also appears in lineup: ${J}`);return{lineup:X,pitcher:$}}function e(q,J){return(q+J)/2}function M0(q,J){let Q=q.rates||{},U=J.rates||{},X=q.stats||{},$=O(Q.kRate??0,"batter.kRate"),Z=O(U.kRate??0,"pitcher.kRate"),Y=O(Q.bbRate??0,"batter.bbRate"),_=O(U.bbRate??0,"pitcher.bbRate"),K=O(Q.hrRate??0,"batter.hrRate"),W=O(U.hrRate??0,"pitcher.hrRate"),E=O(Q.BABIP??0.29,"batter.BABIP"),L=O(U.BABIP??0.29,"pitcher.BABIP"),F=Math.max(0,q.PA||0),v=Math.max(0,X.HBP??0),G=Math.max(0,X.singles??0),T=Math.max(0,X.doubles??0),A=Math.max(0,X.triples??0),C=O(e($,Z),"K"),k=O(e(Y,_),"BB"),f=O(e(K,W),"HR"),$0=O(e(E,L),"BABIP"),t=O(F>0?v/F:0,"HBP"),D=C+k+t+f,N=Math.max(0,1-D),M=$0*N,H=N-M,I=G+T+A,V0=I>0?G/I:0.7,f0=I>0?T/I:0.2,h0=I>0?A/I:0.1;return{K:O(C,"K"),BB:O(k,"BB"),HBP:O(t,"HBP"),HR:O(f,"HR"),"1B":O(M*V0,"1B"),"2B":O(M*f0,"2B"),"3B":O(M*h0,"3B"),Out:O(H,"Out")}}function O(q,J){if(typeof q!=="number"||isNaN(q))return 0;if(q<0){if(J)console.warn(`[probabilityModel] Clamped negative value for ${J}: ${q} → 0`);return 0}if(q>1){if(J)console.warn(`[probabilityModel] Clamped value >1 for ${J}: ${q} → 1`);return 1}return q}function _0(q){let{lineup:J,pitcher:Q}=q;return J.map((U)=>{let X=M0(U,Q);return{batter_id:U.player_id,pitcher_id:Q.player_id,probabilities:X}})}function o(q){let J=Object.values(q).reduce((U,X)=>U+X,0),Q=Math.random()*J;for(let[U,X]of Object.entries(q))if((Q-=X)<=0)return U;return Object.keys(q).pop()||""}var b0={Groundout:0.45,Flyout:0.3,Lineout:0.15,Popout:0.1},c0={Groundout:{"1B":0.2,"2B":0.2,SS:0.25,"3B":0.2,P:0.15},Flyout:{LF:0.35,CF:0.45,RF:0.2},Lineout:{"1B":0.25,"2B":0.25,SS:0.25,"3B":0.25},Popout:{C:0.3,"1B":0.2,"2B":0.15,SS:0.2,"3B":0.15}};function T0(q){if(q==="Out"){let J=o(b0),Q=o(c0[J]);return`${J} to ${Q}`}return q}function L0(){return{inning:1,top:!0,outs:0,bases:[0,0,0],lineupIndices:[0,0],score:[0,0],pitcherFatigue:[{battersFaced:0},{battersFaced:0}]}}function j0(q){let J=[];if(q[0])J.push(0);if(q[1]&&q[0])J.push(1);if(q[2]&&q[1]&&q[0])J.push(2);return J}function z0(q,J){let Q=0,U=[0,0,0];for(let $=2;$>=0;$--){if(!q[$])continue;let Z=$+(J==="1B"?1:J==="2B"?2:J==="3B"?3:4);if(Z>=3)Q++;else U[Z]=1}let X={"1B":0,"2B":1,"3B":2}[J];if(X!==void 0)U[X]=1;if(J==="HR")Q++;return[U,Q]}function F0(q,J,Q,U,X,$,Z){let Y=$||o,_=Z||T0,K=Q.top?0:1,W=K===0?q:J,E=K===0?X:U,L=Array.isArray(E)?E:[],F=Q.lineupIndices[K],v=W[F%W.length],G=v.probabilities;if(Q.pitcherFatigue&&Q.pitcherFatigue[1-K]){Q.pitcherFatigue[1-K].battersFaced++;let D=Q.pitcherFatigue[1-K].battersFaced;if(D>18){let N=Math.min((D-18)*0.02,0.2);if(G={...G},G.BB)G.BB+=N;if(G.HBP)G.HBP+=N/2;if(G["1B"])G["1B"]+=N;if(G["2B"])G["2B"]+=N/2;if(G["3B"])G["3B"]+=N/4;if(G.HR)G.HR+=N/4;if(G.K)G.K-=N;if(G.Out)G.Out-=N;let M=Object.values(G).reduce((H,I)=>H+I,0);Object.keys(G).forEach((H)=>G[H]=Math.max(0,G[H]/M))}}let T=Y(G),A=_(T);Q.lineupIndices[K]++;let C=void 0,k="",f=!1,$0=!1,t=!1;if(T==="Out"){let D=A.match(/to ([A-Z0-9]+)/);if(D){if(k=D[1],C=L.find((N)=>N.position===k),C&&C.stats){let N=Number(C.stats.E)||0,M=Number(C.stats.PO)||0,H=Number(C.stats.A)||0,I=M+H+N,V0=I>0?N/I:0.01;if(Math.random()<V0)f=!0}else if(Math.random()<0.01)f=!0}}if(f){let[D,N]=z0(Q.bases,"1B");return Q.bases=D,Q.score[K]+=N,{batter_id:v.batter_id,outcome:`Error on ${k}`,fielder:C,fielderPosition:k}}if(T==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)&&Q.outs===0){let D=j0(Q.bases);if(D.length>=2){if(Math.random()<0.01){t=!0;let N=D.slice().sort((M,H)=>H-M);for(let M=0;M<2&&M<N.length;M++)Q.bases[N[M]]=0;return Q.outs=3,{batter_id:v.batter_id,outcome:"Grounded into triple play",...C?{fielder:C,fielderPosition:k}:{}}}}}if(T==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)&&Q.outs<2){let D=j0(Q.bases);if(D.length>=1){if(Math.random()<0.25){$0=!0;let N=Math.max(...D);return Q.bases[N]=0,Q.outs=Math.min(Q.outs+2,3),{batter_id:v.batter_id,outcome:"Grounded into double play",...C?{fielder:C,fielderPosition:k}:{}}}}}if(T==="Out"&&/^Groundout to [A-Z0-9]+$/.test(A)){Q.outs++;let D=j0(Q.bases);for(let N of D.slice().sort((M,H)=>H-M))if(Q.bases[N])if(N===2)Q.bases[N]=0,Q.score[K]+=1;else Q.bases[N+1]=1,Q.bases[N]=0,console.log("Advancing forced runner from",N,"to",N+1,"Bases:",Q.bases);return{batter_id:v.batter_id,outcome:A,...C?{fielder:C,fielderPosition:k}:{}}}if(T==="Out"||T==="K")Q.outs++;else if(T==="BB"||T==="HBP"){let[D,N]=z0(Q.bases,"1B");Q.bases=D,Q.score[K]+=N}else{let[D,N]=z0(Q.bases,T);Q.bases=D,Q.score[K]+=N}return{batter_id:v.batter_id,outcome:A,...C?{fielder:C,fielderPosition:k}:{}}}function q0(q,J,Q,U,X,$,Z){let Y=Z||Math.random;if(!J.bases[$-1])return{success:!1,out:!1,description:`No runner on base ${$} to steal from.`};let _=q===2?0.6:q===3?0.3:0.1;if(Q?.stats&&X?.stats){let W=Number(Q.stats.SPD||Q.stats.SB||50),E=Number(X.stats.ARM||X.stats["CS%"]||50);if(_=0.5+(W-E)/200,q===3)_-=0.2;if(q===4)_-=0.4;_=Math.max(0.05,Math.min(0.95,_))}if(Y(1)<_){if(J.bases[$-1]=0,q<=3)J.bases[q-1]=1;else J.score[J.top?0:1]+=1;return{success:!0,out:!1,description:`Runner successfully stole base ${q===4?"Home":q}`}}else return J.bases[$-1]=0,J.outs++,{success:!1,out:!0,description:`Runner caught stealing base ${q===4?"Home":q}`}}function J0(q,J,Q,U,X,$){let Z=$||Math.random;if(!J.bases[q-1])return{success:!1,out:!1,error:!1,description:`No runner on base ${q} to pick off.`};let Y=0.05,_=0.1;if(U?.stats&&Q?.stats){let W=Number(U.stats.PK||50),E=Number(Q.stats.SPD||50);Y=0.03+(W-E)/1000,Y=Math.max(0.01,Math.min(0.15,Y))}if(X?.stats)_=0.05+Number(X.stats.E||0)/1000,_=Math.max(0.01,Math.min(0.2,_));let K=Z(1);if(K<Y)return J.bases[q-1]=0,J.outs++,{success:!0,out:!0,error:!1,description:`Runner picked off at base ${q}`};else if(K<Y+_){if(J.bases[q-1]=0,q<3)J.bases[q]=1;else J.score[J.top?0:1]+=1;return{success:!1,out:!1,error:!0,description:`Pickoff error: runner advances from base ${q}`}}else return{success:!1,out:!1,error:!1,description:`Pickoff attempt at base ${q} unsuccessful`}}var y=document.getElementById("home-team-select"),S=document.getElementById("away-team-select"),v0=document.getElementById("load-teams-btn"),g=document.getElementById("status"),N0=document.getElementById("lineups-container"),Q0=document.getElementById("game-state-container"),w=document.getElementById("next-atbat-btn"),P=document.getElementById("atbat-result-container"),H0=document.getElementById("customize-home-lineup-btn"),A0=document.getElementById("customize-away-lineup-btn"),n=document.getElementById("custom-lineup-modal"),k0=document.getElementById("close-lineup-modal"),I0=document.getElementById("lineup-modal-title"),x0=document.getElementById("custom-lineup-form"),i=document.getElementById("batting-order-list"),r=document.getElementById("pitcher-select"),x=document.getElementById("lineup-error"),h=document.getElementById("steal-2b-btn"),d=document.getElementById("steal-3b-btn"),u=document.getElementById("steal-home-btn"),p=document.getElementById("pickoff-1b-btn"),b=document.getElementById("pickoff-2b-btn"),c=document.getElementById("pickoff-3b-btn"),U0=null,X0=null,j=null,z=null,m=null,l=null,V=null,w0=1,y0=!0,s=null,W0=null,a=null,G0=null,S0=null;async function m0(){return["ARI-2025.html","ATL-2025.html","BAL-2025.html","BOS-2025.html","CHC-2025.html","CHW-2025.html","CIN-2025.html","CLE-2025.html","COL-2025.html","DET-2025.html","HOU-2025.html","KCR-2025.html","LAA-2025.html","LAD-2025.html","MIA-2025.html","MIL-2025.html","MIN-2025.html","NYM-2025.html","NYY-2025.html","OAK-2025.html","PHI-2025.html","PIT-2025.html","SDP-2025.html","SEA-2025.html","SFG-2025.html","STL-2025.html","TBR-2025.html","TEX-2025.html","TOR-2025.html","WSN-2025.html"]}async function P0(q){let Q=await(await fetch(`./data/${q}`)).text(),{batting:U,pitching:X}=E0(Q),$=U?Z0(U):[],Z=X?Z0(X):[],Y=O0($),_=C0(Z);return{batters:Y,pitchers:_}}function g0(q,J){if(!N0)return;N0.innerHTML="";let Q=(U,X)=>{if(!U)return`<div><strong>${X}:</strong> Not loaded</div>`;let $=U.lineup||U.batters||[],Z=U.pitcher||U.pitchers&&U.pitchers[0]||{name:"N/A"};return`
      <div style="margin-bottom:1.5em;">
        <strong>${X} Lineup</strong>
        <table class="lineup-table">
          <thead><tr><th>#</th><th>Name</th><th>PA</th></tr></thead>
          <tbody>
            ${($||[]).slice(0,9).map((Y,_)=>`<tr><td>${_+1}</td><td>${Y.name||""}</td><td>${Y.PA||""}</td></tr>`).join("")}
          </tbody>
        </table>
        <div><strong>Pitcher:</strong> ${Z.name}</div>
      </div>
    `};N0.innerHTML=`
    <div style="display:flex;gap:2em;flex-wrap:wrap;">
      <div style="flex:1;min-width:250px;">${Q(q,"Home")}</div>
      <div style="flex:1;min-width:250px;">${Q(J,"Away")}</div>
    </div>
  `}function l0(){if(!Q0)return;if(!V||!j||!z){if(Q0.innerHTML="<em>Game not started.</em>",w)w.style.display="none";return}let q=V,{inning:J,top:Q,outs:U,bases:X,score:$,lineupIndices:Z}=q,Y=Q?0:1,_=Y===0?l:m,K=Y===0?z:j;if(!K){if(Q0.innerHTML="<em>Roster not loaded.</em>",w)w.style.display="none";return}let W=Z[Y]%K.lineup.length,E=K.lineup[W],L=(Y===0?j:z).pitcher,F=["1B","2B","3B"].map((v,G)=>q.bases[G]?v:"").filter(Boolean).join(", ")||"Empty";if(Q0.innerHTML=`
    <div><strong>Inning:</strong> ${J} (${Q?"Top":"Bottom"})</div>
    <div><strong>Outs:</strong> ${U}</div>
    <div><strong>Bases:</strong> ${F}</div>
    <div><strong>Score:</strong> Away ${$[0]} &ndash; Home ${$[1]}</div>
    <div style="margin-top:1em;"><strong>At Bat:</strong> ${E.name} (vs ${L.name})</div>
  `,w)w.style.display=""}function R(q,J=!1){if(!P)return;if(!q)return;if(J){let X=document.createElement("div");X.style.marginTop="1em",X.style.fontWeight="bold",X.textContent=`Inning ${q.inning} - ${q.top?"Top":"Bottom"}`,P.appendChild(X)}let Q=["1B","2B","3B"].map((X,$)=>q.bases[$]?X:"").filter(Boolean).join(", ")||"Empty",U=document.createElement("div");U.innerHTML=`<strong>Batter:</strong> ${q.batterName}<br><strong>Result:</strong> ${q.outcome}<br><strong>Outs:</strong> ${q.outs} &nbsp; <strong>Score:</strong> Away ${q.score[0]} – Home ${q.score[1]} &nbsp; <strong>Bases:</strong> ${Q}`,P.appendChild(U),P.appendChild(document.createElement("br"))}function n0(){if(!j||!z)return;m=_0(j),l=_0(z),V=L0(),B()}function o0(){if(!V||!m||!l)return;let q=V,J=q.top?0:1,Q=J===0?l:m,U=J===0?z:j;if(!U)return;let X=q.lineupIndices[J]%U.lineup.length,$=U.lineup[X],Z=F0(l,m,q,[],[]);R({batterName:$.name,outcome:Z.outcome,outs:q.outs,score:[...q.score],bases:[...q.bases],inning:q.inning,top:q.top});let Y="",_=!1;if(q.outs>=3)if(q.outs=0,q.bases=[0,0,0],q.top)q.top=!1,Y="End of top half. Switching to bottom of inning.",_=!0;else q.top=!0,q.inning++,Y="End of inning. Advancing to next inning.",_=!0;if(_){if(P){let K=document.createElement("div");K.innerHTML=`<em>${Y}</em>`,P.appendChild(K),w0=q.inning,y0=q.top;let W=document.createElement("div");W.style.marginTop="1em",W.style.fontWeight="bold",W.textContent=`Inning ${q.inning} - ${q.top?"Top":"Bottom"}`,P.appendChild(W)}}B()}async function Y0(){if(!y||!S||!g)return;let q=y.value,J=S.value;if(!q||!J)return;g.textContent="Loading lineups...";try{let[Q,U]=await Promise.all([P0(q),P0(J)]);U0=Q,X0=U,j=Q&&Q.batters&&Q.pitchers?K0(s&&s.length===9?s:Q.batters.slice(0,9).map((X)=>X.player_id),W0||Q.pitchers[0].player_id,Q.batters,Q.pitchers):null,z=U&&U.batters&&U.pitchers?K0(a&&a.length===9?a:U.batters.slice(0,9).map((X)=>X.player_id),G0||U.pitchers[0].player_id,U.batters,U.pitchers):null,g0(j,z),g.textContent="Lineups loaded. Ready to simulate!",n0()}catch(Q){g.textContent="Failed to load lineups."}}async function B0(){if(!g)return;g.textContent="Loading teams...";let q=await m0();if(!q.length){g.textContent="No teams found in data folder.";return}for(let J of[y,S]){if(!J)continue;J.innerHTML="";for(let Q of q){let U=document.createElement("option");U.value=Q,U.textContent=Q.replace(".html",""),J.appendChild(U)}}if(y)y.value="CHC-2025.html";if(S)S.value="MIL-2025.html";if(g.textContent="Select home and away teams.",y&&S)Y0()}if(v0)v0.addEventListener("click",B0);if(y)y.addEventListener("change",Y0);if(S)S.addEventListener("change",Y0);if(w)w.addEventListener("click",o0);if(H0)H0.addEventListener("click",()=>{if(!U0)return;R0("home",U0.batters,U0.pitchers,s,W0)});if(A0)A0.addEventListener("click",()=>{if(!X0)return;R0("away",X0.batters,X0.pitchers,a,G0)});if(k0)k0.addEventListener("click",()=>{if(n)n.style.display="none"});if(x0)x0.addEventListener("submit",(q)=>{if(q.preventDefault(),!i||!r)return;let J=[],Q=i.querySelectorAll("select");for(let X of Q){if(!X.value){if(x)x.textContent="Please select a player for every lineup slot.";return}J.push(X.value)}if(new Set(J).size!==J.length){if(x)x.textContent="No duplicate players allowed in the lineup.";return}let U=r.value;if(!U){if(x)x.textContent="Please select a starting pitcher.";return}if(J.includes(U)){if(x)x.textContent="Pitcher cannot also be in the batting lineup.";return}if(S0==="home")s=J,W0=U;else a=J,G0=U;if(n)n.style.display="none";if(m=null,l=null,V=null,w0=1,y0=!0,P)P.innerHTML="";g0(j,z),Y0()});window.addEventListener("DOMContentLoaded",()=>{B0()});function R0(q,J,Q,U,X){if(S0=q,!n||!I0||!i||!r)return;if(I0.textContent=`Customize ${q==="home"?"Home":"Away"} Lineup`,x)x.textContent="";n.style.display="flex";let $=U,Z=X;if(q==="home"&&j)$=j.lineup?j.lineup.map((Y)=>Y.player_id):U,Z=j.pitcher?j.pitcher.player_id:X;else if(q==="away"&&z)$=z.lineup?z.lineup.map((Y)=>Y.player_id):U,Z=z.pitcher?z.pitcher.player_id:X;i.innerHTML="";for(let Y=0;Y<9;Y++){let _=document.createElement("li"),K=document.createElement("select");if(K.name=`batter${Y}`,K.required=!0,K.innerHTML='<option value="">-- Select --</option>'+J.map((W)=>`<option value="${W.player_id}">${W.name} (${W.PA} PA)</option>`).join(""),$&&$[Y])K.value=$[Y];_.appendChild(K),i.appendChild(_)}if(r.innerHTML='<option value="">-- Select --</option>'+Q.map((Y)=>`<option value="${Y.player_id}">${Y.name} (${Y.stats&&Y.stats.IP?Y.stats.IP:""} IP)</option>`).join(""),Z)r.value=Z}function i0(){if(!V)return;if(h)(h instanceof HTMLButtonElement?h:h).disabled=!V.bases[0];if(d)(d instanceof HTMLButtonElement?d:d).disabled=!V.bases[1];if(u)(u instanceof HTMLButtonElement?u:u).disabled=!V.bases[2];if(p)(p instanceof HTMLButtonElement?p:p).disabled=!V.bases[0];if(b)(b instanceof HTMLButtonElement?b:b).disabled=!V.bases[1];if(c)(c instanceof HTMLButtonElement?c:c).disabled=!V.bases[2]}function B(){l0(),i0()}if(h)h.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=q0(2,V,Q,U,X,1);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});if(d)d.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=q0(3,V,Q,U,X,2);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});if(u)u.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=q0(4,V,Q,U,X,3);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});if(p)p.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=J0(1,V,Q,U,X);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});if(b)b.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=J0(2,V,Q,U,X);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});if(c)c.addEventListener("click",()=>{if(!V||!j||!z)return;let q=V.top?0:1,Q=(q===0?z:j).lineup.find((Z)=>!0)||{},U=(q===0?j:z).pitcher,X=(q===0?j:z).lineup[0]||{},$=J0(3,V,Q,U,X);R({batterName:"Runner",outcome:$.description,outs:V.outs,score:[...V.score],bases:[...V.bases],inning:V.inning,top:V.top}),B()});
